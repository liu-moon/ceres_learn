# 大型BA

Structure from Motion 的最新研究证明了从大规模社区照片集重建几何图形的可能性。
BA是相机和点参数的联合非线性优化，是大多数 SfM 系统的关键组成部分，并且对于大型问题来说，它会耗费大量时间。
随着此类集合中的照片数量不断增长到数十万甚至数百万，BA算法的可扩展性已成为一个关键问题。

在这个项目中，我们考虑设计和实现一种新的非精确牛顿型束调整算法，该算法比基于标准 Schur 补的方法占用更少的时间和内存，同时不会影响解决方案的质量。
我们探索了使用共轭梯度算法计算牛顿步长及其性能作为一些简单且计算效率高的预处理器的函数。
我们还表明，舒尔补的使用不仅限于基于因式分解的方法，它还可以用作共轭梯度 (CG) 方法的一部分，而无需承担实际计算和存储在内存中的计算成本，以及这种使用如何等同于特定预处理器的选择。

这项研究是华盛顿大学 GRAIL 实验室社区照片收藏项目的一部分，该项目探索利用大规模互联网图像收藏来进一步研究计算机视觉和图形。

团队

- Sameer Agarwal，华盛顿大学
- Noah Snavely，康奈尔大学
- Steve Seitz，华盛顿大学
- Richard Szeliski，微软研究院

论文
大型BA
Sameer Agarwal、Noah Snavely、Steven M. Seitz 和 Richard Szeliski
欧洲计算机视觉会议，2010 年，希腊克里特岛。
补充材料
海报

## 软件和数据

作为该项目的一部分，我们将发布论文中报告的所有测试问题、软件和性能数据。目前，我们可以下载测试问题。代码将很快发布。

我们尝试了两种数据源：

1. 使用安装在移动车辆上的 Ladybug 相机以固定速率拍摄的图像。图像匹配是通过利用图像的时间顺序和拍摄图像时捕获的 GPS 信息进行的。
2. 从 Flickr.com 下载图像并使用《一日建造罗马》中描述的系统进行匹配。我们使用了特拉法加广场以及杜布罗夫尼克、威尼斯和罗马等城市的图像。

对于 Flickr 照片，匹配的图像被分解为一个骨架集（即稀疏图像核心）和一组叶子图像。首先重建骨架集，然后通过后方交会将叶子图像添加到骨架集中，然后对剩余的 3D 点进行三角测量。
使用修改版的 Bundler 逐步重建骨架集和 Ladybug 数据集，该版本用于将中间未优化的重建转储到磁盘。这产生了 Ladybug、Trafalgar Square、Dubrovnik 和 Venice 数据集。我们将在将叶子图像添加到骨架集并对剩余点进行三角测量后获得的捆绑调整问题称为最终问题。

可用数据集

1. Ladybug
2. Trafalgar Square
3. Dubrovnik
4. Venice
5. Final

## 相机模型

我们使用针孔相机模型；我们为每个相机区域旋转 R、平移 t、焦距 f 和两个径向畸变参数 k1 和 k2 估计的参数。将 3D 点 X 投影到相机 R,t,f,k1,k2 中的公式为：

P = R * X + t（从世界坐标转换为相机坐标）
p = -P / P.z（透视除法）
p' = f * r(p) * p（转换为像素坐标）

其中 P.z 是 P 的第三个 (z) 坐标。在最后一个等式中，r(p) 是一个计算缩放因子以消除径向失真的函数：
r(p) = 1.0 + k1 * ||p||^2 + k2 * ||p||^4。

这给出了以像素为单位的投影，其中图像的原点是图像的中心，正 x 轴指向右，正 y 轴指向上（此外，在相机坐标系中，正 z 轴指向后方，因此相机沿着负 z 轴向下看，就像在 OpenGL 中一样）。

## 数据格式

每个问题都以以下格式的 bzip2 压缩文本文件形式提供。

<num_cameras> <num_points> <num_observations>
<camera_index_1> <point_index_1> <x_1> <y_1>
...
<camera_index_num_observations> <point_index_num_observations> <x_num_observations> <y_num_observations>
<camera_1>
...
<camera_num_cameras>
<point_1>
...
<point_num_points>

其中，相机和点索引从 0 开始。每个相机都是一组 9 个参数 - R、t、f、k1 和 k2。旋转 R 被指定为罗德里格斯矢量。